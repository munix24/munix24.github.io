<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coin Flip Simulator</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background-color: #222;
    color: #fff;
  }
  .container {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    margin-top: 25px; /* Adjusted margin */
    margin-bottom: 25px; /* Adjusted margin */
  }
  .results-container {
    max-width: 80%;
    overflow: auto; /* Use auto for scrollbar */
    white-space: nowrap;
    height: 40px; /* Fixed height */
  }
  .result {
    width: 30px;
    height: 30px;
    border: 2px solid #fff;
    border-radius: 50%;
    line-height: 30px;
    font-size: 14px;
    margin-right: 5px;
    display: inline-block; /* Display results horizontally */
  }
  table {
    margin: 20px auto;
    border-collapse: collapse;
    width: 30%; /* Adjusted width */
  }
  th, td {
    border: 1px solid #fff;
    padding: 8px;
    font-size: 14px; /* Adjusted font size */
  }
  th {
    background-color: #444;
  }
  td {
    background-color: #333;
  }
  #coin {
    width: 100px;
    height: 100px;
    margin: 25px auto; /* Adjusted margin */
    border: 2px solid #fff;
    border-radius: 50%;
    line-height: 100px;
    font-size: 24px;
    background-color: #333;
    cursor: pointer; /* Add cursor pointer */
    user-select: none; /* Disable text selection */
    -webkit-user-select: none; /* For Safari */
    -moz-user-select: none; /* For Firefox */
    -ms-user-select: none; /* For IE/Edge */
  }
  #coin:hover {
    background-color: #555; /* Change background color on hover */
  }
  button {
    background-color: #444;
    color: #fff;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 5px;
  }
  button:hover {
    background-color: #555;
  }
</style>
</head>
<body>

<h1>Coin Flip Simulator</h1>
<div class="container">
  <div>
    <label for="numFlips">Number of flips:</label>
    <input type="number" id="numFlips" value="10" min="1">
  </div>
  <div id="coin" class="result" onclick="flipCoin()">?</div> <!-- Make coin clickable -->
  <div id="results" class="results-container"></div>
</div>
<table>
  <thead>
    <tr>
      <th>Result</th>
      <th>Count</th>
    </tr>
  </thead>
  <tbody id="resultsTableBody"></tbody>
</table>
<table>
  <thead>
    <tr>
      <th>Streak</th>
      <th>Count</th>
    </tr>
  </thead>
  <tbody id="streaksTableBody"></tbody>
</table>

<script>
  let flipCounter = {'Heads': 0, 'Tails': 0, 'Total': 0};
  let streak = 0;
  let streakCounter = {'1': 0, '2': 0, '3': 0, '4': 0, '5': 0, '6': 0, '7': 0, '8': 0}; // Populated with 0 for first 1-8 counts
  let lastResult;
  const maxResults = 20;

  function flipCoin() {
    const numFlips = document.getElementById('numFlips').value;
    for (let i = 0; i < numFlips; i++) {
      const result = Math.random() < 0.5 ? 'Heads' : 'Tails';
      document.getElementById('coin').textContent = result;
      displayResult(result);
      updateFlipCounter(result);
      updateStreaks(result);
    }
  }
  
  function displayResult(result) {
    const resultsDiv = document.getElementById('results');
    const resultDiv = document.createElement('div');
    resultDiv.textContent = result[0];
    resultDiv.className = 'result';
    if (resultsDiv.childElementCount >= maxResults) {
      resultsDiv.removeChild(resultsDiv.firstChild);
    }
    resultsDiv.appendChild(resultDiv);
  }
  
  function updateFlipCounter(result) {
    flipCounter[result]++;
    flipCounter['Total']++;
    updateTable('resultsTableBody', flipCounter);
  }

  function updateStreaks(result) {
    if (result === lastResult){
      streak++;
      if (streakCounter[streak]){
        streakCounter[streak]++;
      } else {
        streakCounter[streak] = 1;  // if not in initial object then initialize
      }
      streakCounter[streak-1]--;
    } else{
      streak = 1;
      if (streakCounter[streak]){
        streakCounter[streak]++;
      } else {
        streakCounter[streak] = 1;  // if not in initial object then initialize
      }
      lastResult = result;
    }
    updateTable('streaksTableBody', streakCounter);
  }

  function updateTable(tableId, data) {
    const tableBody = document.getElementById(tableId);
    tableBody.innerHTML = '';
    for (let key in data) {
      const row = document.createElement('tr');
      const streakCell = document.createElement('td');
      streakCell.textContent = key;
      const countCell = document.createElement('td');
      countCell.textContent = data[key];
      row.appendChild(streakCell);
      row.appendChild(countCell);
      tableBody.appendChild(row);
    }
  }

  updateTable('resultsTableBody', flipCounter);
  updateTable('streaksTableBody', streakCounter);
</script>

</body>
</html>
